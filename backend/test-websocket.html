<!DOCTYPE html>
<html>
<head>
    <title>–¢–µ—Å—Ç WebSocket –ó–≤–æ–Ω–∫–æ–≤</title>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
</head>
<body>
    <h1>–¢–µ—Å—Ç WebSocket –ó–≤–æ–Ω–∫–æ–≤</h1>
    <div id="status">–°—Ç–∞—Ç—É—Å: –û—Ç–∫–ª—é—á–µ–Ω</div>
    <div id="logs"></div>

    <script>
        const socket = io('http://localhost:3000/calls', {
            auth: {
                token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6IlVzZXI0Iiwic3ViIjoiMWFjZTYzOGEtNjIwZS00YWI3LWJhNTMtY2YyY2RjNTQzMmEwIiwiaWF0IjoxNzU2MDMwMzk1LCJleHAiOjE3NTYwMzM5OTV9.kOkr_zfKMHloiJxAObnKlrfW0s77qpC_Sl2auYYW8L0'
            }
        });

        socket.on('connect', () => {
            document.getElementById('status').textContent = '–°—Ç–∞—Ç—É—Å: –ü–æ–¥–∫–ª—é—á–µ–Ω ‚úÖ';
            console.log('‚úÖ User4 –ø–æ–¥–∫–ª—é—á–∏–ª—Å—è –∫ WebSocket –∑–≤–æ–Ω–∫–æ–≤');
        });

        socket.on('incoming_call', (data) => {
            console.log(' –í—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫ –¥–ª—è User4:', data);
            document.getElementById('logs').innerHTML += `<p> –í—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫: ${JSON.stringify(data)}</p>`;
        });

        socket.on('call_status_changed', (data) => {
            console.log('üîÑ –°—Ç–∞—Ç—É—Å –∑–≤–æ–Ω–∫–∞ –∏–∑–º–µ–Ω–∏–ª—Å—è:', data);
            document.getElementById('logs').innerHTML += `<p>üîÑ –°—Ç–∞—Ç—É—Å –∏–∑–º–µ–Ω–∏–ª—Å—è: ${JSON.stringify(data)}</p>`;
        });

        socket.on('disconnect', () => {
            document.getElementById('status').textContent = '–°—Ç–∞—Ç—É—Å: –û—Ç–∫–ª—é—á–µ–Ω ‚ùå';
            console.log('‚ùå User4 –æ—Ç–∫–ª—é—á–∏–ª—Å—è –æ—Ç WebSocket');
        });
    </script>
</body>
</html>